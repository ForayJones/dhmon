language: python

python:
  - "2.7"


before_install:
  - echo "deb http://archive.ubuntu.com/ubuntu trusty main universe" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install -qq --install-recommends git-buildpackage pypy devscripts build-essential python-dev libsnmp-dev python-pika python-yaml

install:
  - wget https://bootstrap.pypa.io/ez_setup.py -O - | sudo pypy
  - rm -f setuptools-18.0.1.zip
  - sudo pip install coveralls
  - sudo ln -sf /usr/local/bin/coverage /usr/bin/

script:
  - make deb

after_success:
  - (cd src/snmpcollector; coveralls)
